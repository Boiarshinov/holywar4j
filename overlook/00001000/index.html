<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>#8. –°–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è DTO –¥–ª—è Unit-—Ç–µ—Å—Ç–æ–≤ | holywar4j</title><meta name=keywords content><meta name=description content="ü¶ó"><meta name=author content><link rel=canonical href=https://boiarshinov.github.io/holywar4j/overlook/00001000/><link crossorigin=anonymous href=/holywar4j/assets/css/stylesheet.min.35cd0f65a15cafa92372b8313deef5960aae04b90ad722f2bbf509eb0468137e.css integrity="sha256-Nc0PZaFcr6kjcrgxPe71lgquBLkK1yLyu/UJ6wRoE34=" rel="preload stylesheet" as=style><link rel=preload href=android-chrome-192x192.png as=image><script defer crossorigin=anonymous src=/holywar4j/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://boiarshinov.github.io/holywar4j/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://boiarshinov.github.io/holywar4j/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://boiarshinov.github.io/holywar4j/favicon-32x32.png><link rel=apple-touch-icon href=https://boiarshinov.github.io/holywar4j/apple-touch-icon.png><link rel=mask-icon href=https://boiarshinov.github.io/holywar4j/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q3EWCSL2W9"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-Q3EWCSL2W9',{anonymize_ip:!1})}</script><meta property="og:title" content="#8. –°–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è DTO –¥–ª—è Unit-—Ç–µ—Å—Ç–æ–≤"><meta property="og:description" content="ü¶ó"><meta property="og:type" content="article"><meta property="og:url" content="https://boiarshinov.github.io/holywar4j/overlook/00001000/"><meta property="article:section" content="overlook"><meta property="article:published_time" content="2021-04-29T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-29T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="#8. –°–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è DTO –¥–ª—è Unit-—Ç–µ—Å—Ç–æ–≤"><meta name=twitter:description content="ü¶ó"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"–í—ã–∂–∏–º–∫–∏ –≤—Å—Ç—Ä–µ—á","item":"https://boiarshinov.github.io/holywar4j/overlook/"},{"@type":"ListItem","position":2,"name":"#8. –°–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è DTO –¥–ª—è Unit-—Ç–µ—Å—Ç–æ–≤","item":"https://boiarshinov.github.io/holywar4j/overlook/00001000/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"#8. –°–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è DTO –¥–ª—è Unit-—Ç–µ—Å—Ç–æ–≤","name":"#8. –°–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è DTO –¥–ª—è Unit-—Ç–µ—Å—Ç–æ–≤","description":"ü¶ó\n","keywords":[],"articleBody":"ü¶ó\n–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ –º–æ–∂–µ—Ç —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é DTO –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–ª–∞—Å—Å–∞:\n@Data public class User { @NotEmpty private String firstName; @NotEmpty private String secondName; @NotNull @Pattern(regexp = \"\\\\d{10}\") private String phone; @NotNull @INN(type = INN.Type.INDIVIDUAL) private String inn; } –ó–¥–µ—Å—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è @Data –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Lombok, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ Bean Validation –∏ –µ–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Hibernate Validator.\n–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –ø–∏—à–µ–º –Ω–∞ —ç—Ç–æ —Ç–µ—Å—Ç—ã.\n–í —Ç–µ—Å—Ç–æ–≤–æ–º –º–µ—Ç–æ–¥–µ –ö–æ–≥–¥–∞ –º—ã –ø–∏—à–µ–º –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç, —Ç–æ –æ–±—ã—á–Ω–æ —Å–æ–∑–¥–∞–µ–º DTO –≤ —Å–∞–º–æ–º —Ç–µ—Å—Ç–æ–≤–æ–º –º–µ—Ç–æ–¥–µ:\n@Test void allInMethod() { User user = new User(); user.setFirstName(\"Claudia\"); user.setSecondName(\"Coca\"); user.setPhone(\"8005553535\"); user.setInn(\"796166717907\"); boolean isValid = validator.isValid(user); assertTrue(isValid); } –í –ø—Ä–∏–≤–∞—Ç–Ω–æ–º –º–µ—Ç–æ–¥–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ –ö–∞–∫ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ DTO-—à–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–µ—Å—Ç–∞—Ö, –º—ã –≤—ã–Ω–æ—Å–∏–º –µ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞.\n@Test void inPrivateMethod() { User user = createValidUser(); boolean isValid = validator.isValid(user); assertTrue(isValid); } @Test void inPrivateMethodFail() { User user = createValidUser(); user.setInn(\"012345678901\"); boolean isValid = validator.isValid(user); assertFalse(isValid); } private User createValidUser() { final User user = new User(); user.setFirstName(\"Claudia\"); user.setSecondName(\"Coca\"); user.setPhone(\"8005553535\"); user.setInn(\"796166717907\"); return user; } –í —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º –º–µ—Ç–æ–¥–µ —É—Ç–∏–ª–∏—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –ß–µ—Ä–µ–∑ –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è –Ω–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç—É –∂–µ —Å–∞–º—É—é DTO –∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤, —Ç–æ–≥–¥–∞ –º—ã –≤—ã–Ω–æ—Å–∏–º –µ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤ —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å:\npublic class TestUtils { public static User createUser() { final User user = new User(); user.setFirstName(\"Claudia\"); user.setSecondName(\"Coca\"); user.setPhone(\"8005553535\"); user.setInn(\"796166717907\"); return user; } } –ó–∞—Ç–µ–º –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø–æ–ª—è–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ DTO –∏ —Ç–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤. –ó–∞—á–∞—Å—Ç—É—é –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ —É–∂–µ –Ω–µ –∏–∑–±–µ–∂–∞—Ç—å:\npublic class TestUtils { public static User createUser() { return createUser(\"796166717907\"); } public static User createUser(String inn) { final User user = new User(); user.setFirstName(\"Claudia\"); user.setSecondName(\"Coca\"); user.setPhone(\"8005553535\"); user.setInn(inn); return user; } public static User createUser(String firstName, String secondName) { final User user = new User(); user.setFirstName(firstName); user.setSecondName(secondName); user.setPhone(\"8005553535\"); user.setInn(\"796166717907\"); return user; } } –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–∞–∫–∏—Ö —Ç–µ–ª–µ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–∑—Ä–∞—Å—Ç–∞—Ç—å—Å—è –¥–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã—Ö –æ–±—ä–µ–º–æ–≤. –ñ–∏—Ç—å —Å —ç—Ç–∏–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ!\n–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è Factory –∏ Builder –ò —Ç—É—Ç –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–≤—É—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤: Factory –∏ Builder.\n–î–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤ —Ç–µ—Å—Ç–∞—Ö DTO –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å-—Ñ–∞–±—Ä–∏–∫—É, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ–º –µ–≥–æ –æ–±—ä–µ–∫—Ç–æ–≤. –ü—Ä–∏ —ç—Ç–æ–º –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–Ω –±—É–¥–µ—Ç –Ω–µ –≥–æ—Ç–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –∞ –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –±–∏–ª–¥–µ—Ä:\npublic final class UserFactory { private final User user; private UserFactory() { this.user = new User(); } public static UserFactory validUser() { return new UserFactory() .firstName(\"Josh\") .secondName(\"Long\") .phone(\"8005553535\") .inn(\"796166717907\"); } public UserFactory firstName(final String firstName) { user.setFirstName(firstName); return this; } public UserFactory secondName(final String secondName) { user.setSecondName(secondName); return this; } public UserFactory phone(final String phone) { user.setPhone(phone); return this; } public UserFactory inn(final String inn) { user.setInn(inn); return this; } public User build() { return user; } } –í—ã–∑–æ–≤ –∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–¥–∞ —Ç–∞–∫–æ–π —Ñ–∞–±—Ä–∏–∫–∏ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–º–ø–∞—Ç–∏—á–Ω–æ:\n@Test void inFactoryFail() { User user = UserFactory.validUser() .inn(\"012345678901\") .build(); boolean isValid = validator.isValid(user); assertFalse(isValid); } –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å, –µ—Å–ª–∏ Builder –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Å–∞–º–æ–º –∫–ª–∞—Å—Å–µ DTO (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å –ø–æ–º–æ—â—å—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ @Builder –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Lombok):\n@Data @Builder public class User { /* ... */ } –¢–æ–≥–¥–∞ —Ñ–∞–±—Ä–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –±—É–¥–µ—Ç —á—É—Ç—å –±–æ–ª–µ–µ –ª–∞–∫–æ–Ω–∏—á–Ω–æ–π:\npublic final class UserFactory { private UserFactory() {} public static User.UserBuilder hardcode() { return User.builder() .firstName(\"Josh\") .secondName(\"Long\") .phone(\"8005553535\") .inn(\"796166717907\"); } } –ï—â–µ –≤ —Ç–∞–∫–æ–π —Ñ–∞–±—Ä–∏–∫–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫–æ–π-–ª–∏–±–æ –≤–∞–ª–∏–¥–Ω—ã–π –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç –∫–ª–∞—Å—Å–∞.\n–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Å–µ–±–µ –∫–ª–∞—Å—Å, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω –ª–∏–±–æ –æ–¥–∏–Ω –Ω–∞–±–æ—Ä –ø–æ–ª–µ–π, –ª–∏–±–æ –Ω–∞–±–æ—Ä –¥—Ä—É–≥–∏—Ö, –Ω–æ –Ω–µ –æ–±–∞ –≤–º–µ—Å—Ç–µ (–¥–æ—Å—Ç–∞–ª—Å—è –Ω–∞–º –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞):\n@Value @Builder public class UserFilter { INN.Type type; LocalDate day; //–õ–∏–±–æ –∑–∞–ø–æ–ª–Ω–µ–Ω day  LocalDateTime from; //–õ–∏–±–æ from + to  LocalDateTime to; } –¢–æ–≥–¥–∞ —Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è –Ω–µ–≥–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:\npublic final class UserFilterFactory { private UserFilterFactory() { } public static UserFilter.UserFilterBuilder byDay() { return UserFilter.builder() .type(INN.Type.INDIVIDUAL) .day(LocalDate.of(2021, 3, 8)); } public static UserFilter.UserFilterBuilder byInterval() { return UserFilter.builder() .type(INN.Type.INDIVIDUAL) .from(LocalDateTime.of( LocalDate.of(2021, 3, 8), LocalTime.of(10, 0) ) ) .to(LocalDateTime.of( LocalDate.of(2021, 3, 8), LocalTime.of(20, 30) ) ); } } –°—Å—ã–ª–∫–∏  –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞ ","wordCount":"663","inLanguage":"en","datePublished":"2021-04-29T00:00:00Z","dateModified":"2021-04-29T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://boiarshinov.github.io/holywar4j/overlook/00001000/"},"publisher":{"@type":"Organization","name":"holywar4j","logo":{"@type":"ImageObject","url":"https://boiarshinov.github.io/holywar4j/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://boiarshinov.github.io/holywar4j/ accesskey=h title="holywar4j (Alt + H)">holywar4j</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://boiarshinov.github.io/holywar4j/about title=About><span>About</span></a></li><li><a href=https://boiarshinov.github.io/holywar4j/backlog title=Backlog><span>Backlog</span></a></li><li><a href=https://boiarshinov.github.io/holywar4j/overlook title="Meeting list"><span>Meeting list</span></a></li><li><a href=https://boiarshinov.github.io/holywar4j/talks title=Talks><span>Talks</span></a></li><li><a href=https://boiarshinov.github.io/holywar4j/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>#8. –°–ø–æ—Å–æ–±—ã —Å–æ–∑–¥–∞–Ω–∏—è DTO –¥–ª—è Unit-—Ç–µ—Å—Ç–æ–≤</h1><div class=post-meta>April 29, 2021</div></header><div class=post-content><p>ü¶ó</p><p>–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ –º–æ–∂–µ—Ç —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é DTO –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–ª–∞—Å—Å–∞:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Data</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>{</span>

    <span style=color:#a6e22e>@NotEmpty</span>
    <span style=color:#66d9ef>private</span> String firstName<span style=color:#f92672>;</span>

    <span style=color:#a6e22e>@NotEmpty</span>
    <span style=color:#66d9ef>private</span> String secondName<span style=color:#f92672>;</span>

    <span style=color:#a6e22e>@NotNull</span>
    <span style=color:#a6e22e>@Pattern</span><span style=color:#f92672>(</span>regexp <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;\\d{10}&#34;</span><span style=color:#f92672>)</span>
    <span style=color:#66d9ef>private</span> String phone<span style=color:#f92672>;</span>

    <span style=color:#a6e22e>@NotNull</span>
    <span style=color:#a6e22e>@INN</span><span style=color:#f92672>(</span>type <span style=color:#f92672>=</span> INN<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>INDIVIDUAL</span><span style=color:#f92672>)</span>
    <span style=color:#66d9ef>private</span> String inn<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>–ó–¥–µ—Å—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è <code>@Data</code> –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Lombok, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ Bean Validation –∏ –µ–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Hibernate Validator.</p><p>–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –ø–∏—à–µ–º –Ω–∞ —ç—Ç–æ —Ç–µ—Å—Ç—ã.</p><h3 id=–≤-—Ç–µ—Å—Ç–æ–≤–æ–º-–º–µ—Ç–æ–¥–µ>–í —Ç–µ—Å—Ç–æ–≤–æ–º –º–µ—Ç–æ–¥–µ<a hidden class=anchor aria-hidden=true href=#–≤-—Ç–µ—Å—Ç–æ–≤–æ–º-–º–µ—Ç–æ–¥–µ>#</a></h3><p>–ö–æ–≥–¥–∞ –º—ã –ø–∏—à–µ–º –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç, —Ç–æ –æ–±—ã—á–Ω–æ —Å–æ–∑–¥–∞–µ–º DTO –≤ —Å–∞–º–æ–º —Ç–µ—Å—Ç–æ–≤–æ–º –º–µ—Ç–æ–¥–µ:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Test</span>
<span style=color:#66d9ef>void</span> <span style=color:#a6e22e>allInMethod</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    User user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User<span style=color:#f92672>();</span>
    user<span style=color:#f92672>.</span><span style=color:#a6e22e>setFirstName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Claudia&#34;</span><span style=color:#f92672>);</span>
    user<span style=color:#f92672>.</span><span style=color:#a6e22e>setSecondName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Coca&#34;</span><span style=color:#f92672>);</span>
    user<span style=color:#f92672>.</span><span style=color:#a6e22e>setPhone</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;8005553535&#34;</span><span style=color:#f92672>);</span>
    user<span style=color:#f92672>.</span><span style=color:#a6e22e>setInn</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;796166717907&#34;</span><span style=color:#f92672>);</span>

    <span style=color:#66d9ef>boolean</span> isValid <span style=color:#f92672>=</span> validator<span style=color:#f92672>.</span><span style=color:#a6e22e>isValid</span><span style=color:#f92672>(</span>user<span style=color:#f92672>);</span>

    assertTrue<span style=color:#f92672>(</span>isValid<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><h3 id=–≤-–ø—Ä–∏–≤–∞—Ç–Ω–æ–º-–º–µ—Ç–æ–¥–µ-—Ç–µ—Å—Ç–æ–≤–æ–≥–æ-–∫–ª–∞—Å—Å–∞>–í –ø—Ä–∏–≤–∞—Ç–Ω–æ–º –º–µ—Ç–æ–¥–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞<a hidden class=anchor aria-hidden=true href=#–≤-–ø—Ä–∏–≤–∞—Ç–Ω–æ–º-–º–µ—Ç–æ–¥–µ-—Ç–µ—Å—Ç–æ–≤–æ–≥–æ-–∫–ª–∞—Å—Å–∞>#</a></h3><p>–ö–∞–∫ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ DTO-—à–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–µ—Å—Ç–∞—Ö, –º—ã –≤—ã–Ω–æ—Å–∏–º –µ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Test</span>
<span style=color:#66d9ef>void</span> <span style=color:#a6e22e>inPrivateMethod</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    User user <span style=color:#f92672>=</span> createValidUser<span style=color:#f92672>();</span>

    <span style=color:#66d9ef>boolean</span> isValid <span style=color:#f92672>=</span> validator<span style=color:#f92672>.</span><span style=color:#a6e22e>isValid</span><span style=color:#f92672>(</span>user<span style=color:#f92672>);</span>

    assertTrue<span style=color:#f92672>(</span>isValid<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>

<span style=color:#a6e22e>@Test</span>
<span style=color:#66d9ef>void</span> <span style=color:#a6e22e>inPrivateMethodFail</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    User user <span style=color:#f92672>=</span> createValidUser<span style=color:#f92672>();</span>
    user<span style=color:#f92672>.</span><span style=color:#a6e22e>setInn</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;012345678901&#34;</span><span style=color:#f92672>);</span>

    <span style=color:#66d9ef>boolean</span> isValid <span style=color:#f92672>=</span> validator<span style=color:#f92672>.</span><span style=color:#a6e22e>isValid</span><span style=color:#f92672>(</span>user<span style=color:#f92672>);</span>

    assertFalse<span style=color:#f92672>(</span>isValid<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>private</span> User <span style=color:#a6e22e>createValidUser</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>final</span> User user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User<span style=color:#f92672>();</span>
    user<span style=color:#f92672>.</span><span style=color:#a6e22e>setFirstName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Claudia&#34;</span><span style=color:#f92672>);</span>
    user<span style=color:#f92672>.</span><span style=color:#a6e22e>setSecondName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Coca&#34;</span><span style=color:#f92672>);</span>
    user<span style=color:#f92672>.</span><span style=color:#a6e22e>setPhone</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;8005553535&#34;</span><span style=color:#f92672>);</span>
    user<span style=color:#f92672>.</span><span style=color:#a6e22e>setInn</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;796166717907&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#66d9ef>return</span> user<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
</code></pre></div><h3 id=–≤-—Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º-–º–µ—Ç–æ–¥–µ-—É—Ç–∏–ª–∏—Ç–Ω–æ–≥–æ-–∫–ª–∞—Å—Å–∞>–í —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º –º–µ—Ç–æ–¥–µ —É—Ç–∏–ª–∏—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞<a hidden class=anchor aria-hidden=true href=#–≤-—Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º-–º–µ—Ç–æ–¥–µ-—É—Ç–∏–ª–∏—Ç–Ω–æ–≥–æ-–∫–ª–∞—Å—Å–∞>#</a></h3><p>–ß–µ—Ä–µ–∑ –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è –Ω–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç—É –∂–µ —Å–∞–º—É—é DTO –∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤, —Ç–æ–≥–¥–∞ –º—ã –≤—ã–Ω–æ—Å–∏–º –µ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤ —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestUtils</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> User <span style=color:#a6e22e>createUser</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>final</span> User user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User<span style=color:#f92672>();</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setFirstName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Claudia&#34;</span><span style=color:#f92672>);</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setSecondName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Coca&#34;</span><span style=color:#f92672>);</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setPhone</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;8005553535&#34;</span><span style=color:#f92672>);</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setInn</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;796166717907&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> user<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>–ó–∞—Ç–µ–º –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø–æ–ª—è–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ DTO –∏ —Ç–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤.
–ó–∞—á–∞—Å—Ç—É—é –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ —É–∂–µ –Ω–µ –∏–∑–±–µ–∂–∞—Ç—å:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestUtils</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> User <span style=color:#a6e22e>createUser</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> createUser<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;796166717907&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> User <span style=color:#a6e22e>createUser</span><span style=color:#f92672>(</span>String inn<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>final</span> User user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User<span style=color:#f92672>();</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setFirstName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Claudia&#34;</span><span style=color:#f92672>);</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setSecondName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Coca&#34;</span><span style=color:#f92672>);</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setPhone</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;8005553535&#34;</span><span style=color:#f92672>);</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setInn</span><span style=color:#f92672>(</span>inn<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> user<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> User <span style=color:#a6e22e>createUser</span><span style=color:#f92672>(</span>String firstName<span style=color:#f92672>,</span> String secondName<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>final</span> User user <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User<span style=color:#f92672>();</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setFirstName</span><span style=color:#f92672>(</span>firstName<span style=color:#f92672>);</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setSecondName</span><span style=color:#f92672>(</span>secondName<span style=color:#f92672>);</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setPhone</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;8005553535&#34;</span><span style=color:#f92672>);</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setInn</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;796166717907&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> user<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–∞–∫–∏—Ö —Ç–µ–ª–µ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–∑—Ä–∞—Å—Ç–∞—Ç—å—Å—è –¥–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã—Ö –æ–±—ä–µ–º–æ–≤.
–ñ–∏—Ç—å —Å —ç—Ç–∏–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ!</p><h3 id=–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—Å–æ—á–µ—Ç–∞–Ω–∏—è-factory-–∏-builder>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è Factory –∏ Builder<a hidden class=anchor aria-hidden=true href=#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—Å–æ—á–µ—Ç–∞–Ω–∏—è-factory-–∏-builder>#</a></h3><p>–ò —Ç—É—Ç –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–≤—É—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤: Factory –∏ Builder.</p><p>–î–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤ —Ç–µ—Å—Ç–∞—Ö DTO –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å-—Ñ–∞–±—Ä–∏–∫—É, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ–º –µ–≥–æ –æ–±—ä–µ–∫—Ç–æ–≤.
–ü—Ä–∏ —ç—Ç–æ–º –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–Ω –±—É–¥–µ—Ç –Ω–µ –≥–æ—Ç–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –∞ –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –±–∏–ª–¥–µ—Ä:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserFactory</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> User user<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>UserFactory</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> User<span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> UserFactory <span style=color:#a6e22e>validUser</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> UserFactory<span style=color:#f92672>()</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>firstName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Josh&#34;</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>secondName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Long&#34;</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>phone</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;8005553535&#34;</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>inn</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;796166717907&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> UserFactory <span style=color:#a6e22e>firstName</span><span style=color:#f92672>(</span><span style=color:#66d9ef>final</span> String firstName<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setFirstName</span><span style=color:#f92672>(</span>firstName<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> UserFactory <span style=color:#a6e22e>secondName</span><span style=color:#f92672>(</span><span style=color:#66d9ef>final</span> String secondName<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setSecondName</span><span style=color:#f92672>(</span>secondName<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> UserFactory <span style=color:#a6e22e>phone</span><span style=color:#f92672>(</span><span style=color:#66d9ef>final</span> String phone<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setPhone</span><span style=color:#f92672>(</span>phone<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> UserFactory <span style=color:#a6e22e>inn</span><span style=color:#f92672>(</span><span style=color:#66d9ef>final</span> String inn<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        user<span style=color:#f92672>.</span><span style=color:#a6e22e>setInn</span><span style=color:#f92672>(</span>inn<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> User <span style=color:#a6e22e>build</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> user<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>–í—ã–∑–æ–≤ –∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–¥–∞ —Ç–∞–∫–æ–π —Ñ–∞–±—Ä–∏–∫–∏ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–∏–º–ø–∞—Ç–∏—á–Ω–æ:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Test</span>
<span style=color:#66d9ef>void</span> <span style=color:#a6e22e>inFactoryFail</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    User user <span style=color:#f92672>=</span> UserFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>validUser</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>inn</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;012345678901&#34;</span><span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>

    <span style=color:#66d9ef>boolean</span> isValid <span style=color:#f92672>=</span> validator<span style=color:#f92672>.</span><span style=color:#a6e22e>isValid</span><span style=color:#f92672>(</span>user<span style=color:#f92672>);</span>

    assertFalse<span style=color:#f92672>(</span>isValid<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å, –µ—Å–ª–∏ Builder –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Å–∞–º–æ–º –∫–ª–∞—Å—Å–µ DTO (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å –ø–æ–º–æ—â—å—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ <code>@Builder</code> –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Lombok):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Data</span>
<span style=color:#a6e22e>@Builder</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>{</span>
    <span style=color:#75715e>/* ... */</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>–¢–æ–≥–¥–∞ —Ñ–∞–±—Ä–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –±—É–¥–µ—Ç —á—É—Ç—å –±–æ–ª–µ–µ –ª–∞–∫–æ–Ω–∏—á–Ω–æ–π:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserFactory</span> <span style=color:#f92672>{</span>

    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>UserFactory</span><span style=color:#f92672>()</span> <span style=color:#f92672>{}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> User<span style=color:#f92672>.</span><span style=color:#a6e22e>UserBuilder</span> <span style=color:#a6e22e>hardcode</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> User<span style=color:#f92672>.</span><span style=color:#a6e22e>builder</span><span style=color:#f92672>()</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>firstName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Josh&#34;</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>secondName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Long&#34;</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>phone</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;8005553535&#34;</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>inn</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;796166717907&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>–ï—â–µ –≤ —Ç–∞–∫–æ–π —Ñ–∞–±—Ä–∏–∫–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫–æ–π-–ª–∏–±–æ –≤–∞–ª–∏–¥–Ω—ã–π –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç –∫–ª–∞—Å—Å–∞.</p><p>–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Å–µ–±–µ –∫–ª–∞—Å—Å, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω –ª–∏–±–æ –æ–¥–∏–Ω –Ω–∞–±–æ—Ä –ø–æ–ª–µ–π, –ª–∏–±–æ –Ω–∞–±–æ—Ä –¥—Ä—É–≥–∏—Ö, –Ω–æ –Ω–µ –æ–±–∞ –≤–º–µ—Å—Ç–µ (–¥–æ—Å—Ç–∞–ª—Å—è –Ω–∞–º –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@Value</span>
<span style=color:#a6e22e>@Builder</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserFilter</span> <span style=color:#f92672>{</span>

    INN<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span> type<span style=color:#f92672>;</span>
    LocalDate day<span style=color:#f92672>;</span> <span style=color:#75715e>//–õ–∏–±–æ –∑–∞–ø–æ–ª–Ω–µ–Ω day
</span><span style=color:#75715e></span>    LocalDateTime from<span style=color:#f92672>;</span> <span style=color:#75715e>//–õ–∏–±–æ from + to
</span><span style=color:#75715e></span>    LocalDateTime to<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>–¢–æ–≥–¥–∞ —Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è –Ω–µ–≥–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserFilterFactory</span> <span style=color:#f92672>{</span>

    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>UserFilterFactory</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span> <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> UserFilter<span style=color:#f92672>.</span><span style=color:#a6e22e>UserFilterBuilder</span> <span style=color:#a6e22e>byDay</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> UserFilter<span style=color:#f92672>.</span><span style=color:#a6e22e>builder</span><span style=color:#f92672>()</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>type</span><span style=color:#f92672>(</span>INN<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>INDIVIDUAL</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>day</span><span style=color:#f92672>(</span>LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2021<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 8<span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> UserFilter<span style=color:#f92672>.</span><span style=color:#a6e22e>UserFilterBuilder</span> <span style=color:#a6e22e>byInterval</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> UserFilter<span style=color:#f92672>.</span><span style=color:#a6e22e>builder</span><span style=color:#f92672>()</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>type</span><span style=color:#f92672>(</span>INN<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>INDIVIDUAL</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>from</span><span style=color:#f92672>(</span>LocalDateTime<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>
                LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2021<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 8<span style=color:#f92672>),</span>
                LocalTime<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>10<span style=color:#f92672>,</span> 0<span style=color:#f92672>)</span>
                <span style=color:#f92672>)</span>
            <span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>to</span><span style=color:#f92672>(</span>LocalDateTime<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>
                LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2021<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 8<span style=color:#f92672>),</span>
                LocalTime<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>20<span style=color:#f92672>,</span> 30<span style=color:#f92672>)</span>
                <span style=color:#f92672>)</span>
            <span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=—Å—Å—ã–ª–∫–∏>–°—Å—ã–ª–∫–∏<a hidden class=anchor aria-hidden=true href=#—Å—Å—ã–ª–∫–∏>#</a></h2><ul><li><a href=https://github.com/Boiarshinov/test-builders-demo>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞</a></li></ul></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://boiarshinov.github.io/holywar4j/>holywar4j</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>